<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>233ä¹å›­ - å‘ç°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://unpkg.com/tdesign-mobile-vue/dist/tdesign.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        background-color: #f5f5f5;
        margin: 0;
        padding: 0;
        height: 100%;
        overflow-x: hidden;
        touch-action: pan-y;
        -webkit-overflow-scrolling: touch;
      }

      .app-header {
        position: sticky;
        top: 0;
        z-index: 100;
        background-color: white;
        padding: 12px 16px 8px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      }

      .tab-active {
        color: #000;
        font-weight: 600;
        position: relative;
      }

      .tab-active::after {
        content: "";
        position: absolute;
        bottom: -6px;
        left: 25%;
        width: 50%;
        height: 3px;
        background-color: #ff4c3b;
        border-radius: 1.5px;
      }

      .feed-columns {
        display: flex;
        width: 100%;
        padding: 8px 4px;
        box-sizing: border-box;
      }

      .feed-column-left,
      .feed-column-right {
        width: 50%;
        padding: 0 4px;
        box-sizing: border-box;
      }

      .feed-item {
        background-color: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        margin-bottom: 12px;
        transition: all 0.3s ease;
        transform-origin: center;
        height: auto;
        contain: content;
        opacity: 0;
        animation: fadeIn 0.5s ease forwards;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(8px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .feed-item:active {
        transform: scale(0.98);
      }

      /* Feed image with placeholder and loader */
      .feed-image {
        width: 100%;
        position: relative;
        overflow: hidden;
        background-color: #f0f0f0;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      /* ç§»é™¤å›ºå®šçš„çºµæ¨ªæ¯”ï¼Œè®©å›¾ç‰‡ä¿æŒåŸå§‹æ¯”ä¾‹ */
      .feed-item:nth-child(odd) .feed-image {
        aspect-ratio: 3/4;
      }

      .feed-item:nth-child(even) .feed-image {
        aspect-ratio: 1/1;
      }

      .feed-item:nth-child(3n) .feed-image {
        aspect-ratio: 4/3;
      }

      .feed-image::before {
        content: "";
        display: block;
        position: absolute;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        border: 2px solid #ddd;
        border-top-color: #999;
        animation: spin 1s linear infinite;
        z-index: 0;
      }

      .feed-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        position: relative;
        z-index: 1;
      }

      .video-indicator {
        position: absolute;
        right: 8px;
        bottom: 8px;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
      }

      .feed-content {
        padding: 8px;
      }

      .user-info {
        display: flex;
        align-items: center;
        margin-top: 8px;
      }

      .user-avatar {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        object-fit: cover;
      }

      .like-count {
        display: flex;
        align-items: center;
        color: #999;
        font-size: 12px;
      }

      /* Pull to refresh & infinite scroll */
      .refresh-container {
        display: flex;
        justify-content: center;
        padding: 12px 0;
        color: #666;
        font-size: 12px;
      }

      .loading-container {
        display: flex;
        justify-content: center;
        padding: 16px 0;
        color: #666;
      }

      .loading-spinner {
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Target left and right columns for waterfall layout */
      .feed-column-left .feed-item:nth-child(odd) {
        margin-bottom: 16px;
      }

      .feed-column-right .feed-item:nth-child(even) {
        margin-bottom: 16px;
      }

      /* Bottom navigation bar */
      .bottom-nav {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: white;
        display: flex;
        justify-content: space-around;
        padding: 8px 0 20px;
        border-top: 1px solid #eee;
      }

      .nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        font-size: 12px;
        color: #666;
      }

      .nav-item.active {
        color: #ff4c3b;
      }

      .nav-icon {
        font-size: 24px;
        margin-bottom: 2px;
      }

      /* Create post button */
      .create-post {
        position: fixed;
        bottom: 80px;
        right: 16px;
        width: 48px;
        height: 48px;
        background-color: #ff4c3b;
        border-radius: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        box-shadow: 0 2px 8px rgba(255, 76, 59, 0.4);
      }
    </style>
  </head>
  <body>
    <div class="app-container">
      <!-- Header -->
      <div class="app-header">
        <div class="flex justify-between items-center">
          <div class="flex items-center space-x-6">
            <div class="tab-active text-base">å‘ç°</div>
            <div class="text-gray-600 text-base">æ¸¸æˆåœˆ</div>
            <div class="text-gray-600 text-base flex items-center">
              <span class="mr-1">æœè¯å™¨</span>
              <span
                class="inline-block w-4 h-4 bg-pink-100 rounded-full"
              ></span>
            </div>
          </div>
          <div class="flex items-center space-x-3">
            <i class="ri-search-line text-xl"></i>
            <i class="ri-message-3-line text-xl"></i>
          </div>
        </div>
      </div>

      <!-- Content - Pull to refresh area -->
      <div class="refresh-container hidden" id="refresh-indicator">
        <div class="flex items-center">
          <i class="ri-refresh-line mr-1 loading-spinner"></i>
          <span>ä¸‹æ‹‰åˆ·æ–°...</span>
        </div>
      </div>

      <!-- Feed content -->
      <div class="feed-columns">
        <!-- Left column -->
        <div class="feed-column-left">
          <div id="left-column">
            <!-- Content will be inserted here dynamically -->
          </div>
        </div>

        <!-- Right column -->
        <div class="feed-column-right">
          <div id="right-column">
            <!-- Content will be inserted here dynamically -->
          </div>
        </div>
      </div>

      <!-- Loading more indicator -->
      <div class="loading-container hidden" id="loading-indicator">
        <div class="flex items-center">
          <i class="ri-loader-2-line mr-1 loading-spinner"></i>
          <span>åŠ è½½æ›´å¤š...</span>
        </div>
      </div>

      <!-- Create post button -->
      <div class="create-post">
        <i class="ri-add-line text-2xl"></i>
      </div>

      <!-- Bottom navigation -->
      <div class="bottom-nav">
        <div class="nav-item active">
          <i class="nav-icon ri-home-5-line"></i>
          <span>é¦–é¡µ</span>
        </div>
        <div class="nav-item">
          <i class="nav-icon ri-planet-line"></i>
          <span>ç¤¾åŒº</span>
        </div>
        <div class="nav-item">
          <i class="nav-icon ri-video-add-line"></i>
          <span>åˆ›ä½œ</span>
        </div>
        <div class="nav-item">
          <i class="nav-icon ri-gamepad-line"></i>
          <span>æ‰¾æ¸¸æˆ</span>
        </div>
        <div class="nav-item">
          <i class="nav-icon ri-user-3-line"></i>
          <span>æˆ‘çš„</span>
        </div>
      </div>
    </div>

    <script>
      // Mock data for different URL parameters
      const mockDataTypes = {
        default: [
          {
            id: 1,
            title: "ã€ç‰ˆæœ¬å‰ç»ã€‘æ‰‹æ¸¸æ–°ç‰ˆæœ¬é¢„å‘Šâ€”â€”é‡çˆªæ–°æ¨¡å‹ï¼Œéƒ¨åˆ†æé¾™æ–°",
            image: "https://picsum.photos/400/300?random=1",
            isVideo: false,
            category: "æé¾™å²›ï¼ˆè¯ºå…‹ä¹‹å²›ï¼‰",
            user: {
              name: "æ³¡å¤«äº‘",
              avatar: "https://i.pravatar.cc/150?img=1",
            },
            likes: 10,
          },
          {
            id: 2,
            title: "ã€Â·è‹¥æ¢¦ï¹ªğŸŒ¸â˜•ã€‘è½åœ¨æ•æ¢¦ç½‘é‡Œçš„å°å®¶âœ§Ëš à¼˜ â‹†ï½¡ËšğŸ“Ë–Â°#ç”³è¯·ç²¾",
            image: "https://picsum.photos/400/500?random=2",
            isVideo: false,
            category: "æ¥åŠ å°é•‡æ—¥å¸¸ç”Ÿæ´»",
            user: {
              name: "å°é±¼è•¾ä¼Š",
              avatar: "https://i.pravatar.cc/150?img=2",
            },
            likes: 79,
          },
          {
            id: 3,
            title: "ã€æ¨èåœ°å›¾â€”é†‰èŠ±é…’è‚†ã€‘ç¬¬ä¸‰æœŸ",
            image: "https://picsum.photos/400/250?random=3",
            isVideo: false,
            category: "è¾¾ä½ ä¸–ç•Œ",
            user: {
              name: "æˆ‘æ˜¯ä½ çš„äº²çˆ±",
              avatar: "https://i.pravatar.cc/150?img=3",
            },
            likes: 9,
          },
          {
            id: 4,
            title: "æ¢…ä¸½èè¿æ‹›å°æŠ€å·§ï¼ç”¨çŸ¥è¯†å®³æ­»å†ä¸Šä¸€å±‚æ¥¼",
            image: "https://picsum.photos/400/280?random=4",
            isVideo: true,
            category: "å†³èƒœè£èª‰ã€Šå¬å”¤å¸ˆä¸‹è½½ã€‹",
            user: {
              name: "å†·æ«è”·è–‡",
              avatar: "https://i.pravatar.cc/150?img=4",
            },
            likes: 23,
          },
          {
            id: 5,
            title: "ä¸‰è§’æ´²è¡ŒåŠ¨: å…¨é¢æˆ˜åœºè¶£å‘³æ€§å‡çº§ï¼Œå¤ºæ——ï¼Œæ”»é˜²åˆé›†ï¼Œæ¥ç©",
            image: "https://picsum.photos/400/320?random=5",
            isVideo: true,
            category: "ä¸‰è§’æ´²è¡ŒåŠ¨",
            user: {
              name: "èƒ½çŒ«æ¸¸æˆæ”»ç•¥",
              avatar: "https://i.pravatar.cc/150?img=5",
            },
            likes: 644,
          },
          {
            id: 6,
            title: "ä¸æŒ‘å…‰çº¿ï¼Œåªé‡è‡ªå·±çœ‹è§‰çš„",
            image: "https://picsum.photos/400/260?random=6",
            isVideo: false,
            category: "",
            user: {
              name: "é˜¿è¾",
              avatar: "https://i.pravatar.cc/150?img=6",
            },
            likes: 38,
          },
          {
            id: 7,
            title: "å…³æ³¨æˆ‘ï¼ŒéšæœºæŠ½äººæ“ç¤¼ï¼",
            image: "https://picsum.photos/400/480?random=7",
            isVideo: false,
            category: "",
            user: {
              name: "é’ç©ºåƒç»ª",
              avatar: "https://i.pravatar.cc/150?img=7",
            },
            likes: 51,
          },
          {
            id: 8,
            title: "æ¢é™©çˆ±å¥½è€…çš„å¤©å ‚ï¼šå¤å¢“æ¢é™©å®æ™¯ä½“éªŒ",
            image: "https://picsum.photos/400/420?random=8",
            isVideo: true,
            category: "å†’é™©æ—…è¡Œå®¶",
            user: {
              name: "å¤§æ©˜æ— æƒ…",
              avatar: "https://i.pravatar.cc/150?img=8",
            },
            likes: 245,
          },
        ],
        featured: [
          {
            id: 9,
            title: "ã€ç²¾é€‰ã€‘æ–°å¹´ç‰¹è¾‘ï¼šè·¨å¹´çƒŸèŠ±å¤§èµ",
            image: "https://picsum.photos/400/350?random=9",
            isVideo: true,
            category: "èŠ‚æ—¥åº†å…¸",
            user: {
              name: "çƒŸç«å¸ˆå‚…",
              avatar: "https://i.pravatar.cc/150?img=9",
            },
            likes: 1289,
          },
          {
            id: 10,
            title: "ã€ç²¾é€‰ã€‘å®è—æ¸¸æˆæ¨èï¼šè¿™äº›ç‹¬ç«‹æ¸¸æˆå€¼å¾—ä¸€è¯•",
            image: "https://picsum.photos/400/250?random=10",
            isVideo: false,
            category: "æ¸¸æˆæ¨è",
            user: {
              name: "æ¸¸æˆè¯„æµ‹å®˜",
              avatar: "https://i.pravatar.cc/150?img=10",
            },
            likes: 952,
          },
          {
            id: 11,
            title: "ã€ç²¾é€‰ã€‘æˆ‘çš„åŠ¨ç‰©èŠ±å›­ï¼šç¨€æœ‰å® ç‰©é›†é”¦",
            image: "https://picsum.photos/400/460?random=11",
            isVideo: false,
            category: "å® ç‰©å¤©åœ°",
            user: {
              name: "èŠ±å›­å®ˆæŠ¤è€…",
              avatar: "https://i.pravatar.cc/150?img=11",
            },
            likes: 843,
          },
          {
            id: 12,
            title: "ã€ç²¾é€‰ã€‘ç¾é£Ÿæ¢åº—æŒ‡å—ï¼šåŸå¸‚é‡Œçš„éšè—ç¾é£Ÿ",
            image: "https://picsum.photos/400/280?random=12",
            isVideo: true,
            category: "ç¾é£Ÿæ¢åº—",
            user: {
              name: "åƒè´§æ—¥è®°",
              avatar: "https://i.pravatar.cc/150?img=12",
            },
            likes: 726,
          },
          {
            id: 13,
            title: "ã€ç²¾é€‰ã€‘è‰ºæœ¯å®¶çš„å·¥ä½œå®¤ï¼šåˆ›ä½œè¿‡ç¨‹æ­ç§˜",
            image: "https://picsum.photos/400/380?random=13",
            isVideo: true,
            category: "è‰ºæœ¯åˆ›ä½œ",
            user: {
              name: "åˆ›æ„å·¥åŠ",
              avatar: "https://i.pravatar.cc/150?img=13",
            },
            likes: 615,
          },
          {
            id: 14,
            title: "ã€ç²¾é€‰ã€‘æˆ‘çš„éœ²è¥è£…å¤‡å¤§å…¬å¼€",
            image: "https://picsum.photos/400/320?random=14",
            isVideo: false,
            category: "æˆ·å¤–æ¢é™©",
            user: {
              name: "é‡å¤–ç”Ÿå­˜è€…",
              avatar: "https://i.pravatar.cc/150?img=14",
            },
            likes: 588,
          },
        ],
        games: [
          {
            id: 15,
            title: "ã€Šæ˜Ÿé™…æ¼«æ¸¸ã€‹å®‡å®™æ¢ç´¢æ–°ç©æ³•è¯¦è§£",
            image: "https://picsum.photos/400/300?random=15",
            isVideo: true,
            category: "æ˜Ÿé™…æ¼«æ¸¸",
            user: {
              name: "å¤ªç©ºæ¢é™©å®¶",
              avatar: "https://i.pravatar.cc/150?img=15",
            },
            likes: 823,
          },
          {
            id: 16,
            title: "ã€Šé­”æ³•å­¦é™¢ã€‹éšè—ä»»åŠ¡æ”»ç•¥å…¨é›†",
            image: "https://picsum.photos/400/420?random=16",
            isVideo: false,
            category: "é­”æ³•å­¦é™¢",
            user: {
              name: "é­”æ³•å¯¼å¸ˆ",
              avatar: "https://i.pravatar.cc/150?img=16",
            },
            likes: 765,
          },
          {
            id: 17,
            title: "ã€Šè’é‡æ±‚ç”Ÿã€‹æé™ç”Ÿå­˜æŒ‘æˆ˜",
            image: "https://picsum.photos/400/280?random=17",
            isVideo: true,
            category: "è’é‡æ±‚ç”Ÿ",
            user: {
              name: "è’é‡ä¸“å®¶",
              avatar: "https://i.pravatar.cc/150?img=17",
            },
            likes: 654,
          },
          {
            id: 18,
            title: "ã€Šèµ›è½¦å¤§å¸ˆã€‹æœ€æ–°èµ›é“æŠ¢å…ˆä½“éªŒ",
            image: "https://picsum.photos/400/250?random=18",
            isVideo: true,
            category: "èµ›è½¦å¤§å¸ˆ",
            user: {
              name: "èµ›é“ä¼ å¥‡",
              avatar: "https://i.pravatar.cc/150?img=18",
            },
            likes: 589,
          },
          {
            id: 19,
            title: "ã€Šæ¨¡æ‹ŸåŸå¸‚ã€‹åŸå¸‚è§„åˆ’æŠ€å·§åˆ†äº«",
            image: "https://picsum.photos/400/360?random=19",
            isVideo: false,
            category: "æ¨¡æ‹ŸåŸå¸‚",
            user: {
              name: "åŸå¸‚è§„åˆ’å¸ˆ",
              avatar: "https://i.pravatar.cc/150?img=19",
            },
            likes: 512,
          },
          {
            id: 20,
            title: "ã€Šæ€ªç‰©çŒäººã€‹ç¨€æœ‰æ­¦å™¨æ”¶é›†æŒ‡å—",
            image: "https://picsum.photos/400/320?random=20",
            isVideo: false,
            category: "æ€ªç‰©çŒäºº",
            user: {
              name: "çŒäººå¤§å¸ˆ",
              avatar: "https://i.pravatar.cc/150?img=20",
            },
            likes: 498,
          },
        ],
      };

      // Function to get URL parameters
      function getUrlParam(param) {
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        return urlParams.get(param);
      }

      // Get data type from URL parameter
      const dataType = getUrlParam("type") || "default";
      const data = mockDataTypes[dataType] || mockDataTypes.default;

      // Function to create feed item HTML
      function createFeedItem(item) {
        return `
                <div class="feed-item">
                    <div class="feed-image">
                        <img src="${item.image}" alt="${
          item.title
        }" loading="lazy" />
                        ${
                          item.isVideo
                            ? '<div class="video-indicator"><i class="ri-play-fill"></i></div>'
                            : ""
                        }
                    </div>
                    <div class="feed-content">
                        <div class="text-sm font-medium line-clamp-2 min-h-[2.5rem]">${
                          item.title
                        }</div>
                        <div class="text-xs text-gray-500 mt-1 min-h-[1rem]">${
                          item.category || ""
                        }</div>
                        <div class="user-info flex justify-between items-center">
                            <div class="flex items-center">
                                <img class="user-avatar mr-1" src="${
                                  item.user.avatar
                                }" alt="${item.user.name}" />
                                <span class="text-xs text-gray-600">${
                                  item.user.name
                                }</span>
                            </div>
                            <div class="like-count">
                                <i class="ri-thumb-up-line mr-1"></i>
                                <span>${item.likes}</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
      }

      // æ”¹è¿›åçš„ç€‘å¸ƒæµæ¸²æŸ“å‡½æ•°
      function renderItems() {
        const leftColumn = document.getElementById("left-column");
        const rightColumn = document.getElementById("right-column");

        // æ¸…ç©ºç°æœ‰å†…å®¹
        leftColumn.innerHTML = "";
        rightColumn.innerHTML = "";

        // è®°å½•ä¸¤åˆ—çš„ç´¯è®¡é«˜åº¦
        let leftHeight = 0;
        let rightHeight = 0;

        // ä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºDOMå…ƒç´ å¹¶æ·»åŠ åˆ°è¾ƒçŸ­çš„åˆ—
        data.forEach((item, index) => {
          const feedItem = createFeedItem(item);
          const tempDiv = document.createElement("div");
          tempDiv.innerHTML = feedItem;
          const itemEl = tempDiv.firstElementChild;

          // ä¸ºäº†å¹³æ»‘è¿‡æ¸¡æ·»åŠ åŠ¨ç”»å»¶è¿Ÿ
          const delay = Math.min(index * 0.05, 0.5); // æœ€å¤§å»¶è¿Ÿ500ms
          itemEl.style.animationDelay = `${delay}s`;

          // åŸºäºå†…å®¹é•¿åº¦ç²—ç•¥ä¼°ç®—é«˜åº¦
          const itemHeight =
            200 + item.title.length * 0.5 + (item.category ? 20 : 0);

          // æ·»åŠ åˆ°é«˜åº¦è¾ƒå°çš„åˆ—ï¼Œå®ç°çœŸæ­£çš„ç€‘å¸ƒæµ
          if (leftHeight <= rightHeight) {
            leftColumn.appendChild(itemEl);
            leftHeight += itemHeight;
          } else {
            rightColumn.appendChild(itemEl);
            rightHeight += itemHeight;
          }
        });
      }

      // æ·»åŠ æ›´å¤šå†…å®¹çš„å‡½æ•°
      function loadMoreItems() {
        // æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨
        const loadingIndicator = document.getElementById("loading-indicator");
        loadingIndicator.classList.remove("hidden");

        // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚å»¶è¿Ÿ
        setTimeout(function () {
          // å¤åˆ¶åŸæœ‰æ•°æ®å¹¶ä¿®æ”¹IDä»¥æ¨¡æ‹Ÿæ–°æ•°æ®
          const newItems = data.map((item, index) => {
            return {
              ...item,
              id: item.id + 100, // ç¡®ä¿IDä¸é‡å¤
              title: `æ–°å†…å®¹: ${item.title}`, // æ·»åŠ æ ‡è®°ä»¥åŒºåˆ†æ–°å†…å®¹
              image: `${item.image}&t=${Date.now()}`, // æ·»åŠ æ—¶é—´æˆ³ä»¥è·å–ä¸åŒå›¾ç‰‡
            };
          });

          // è®°å½•å½“å‰ä¸¤åˆ—çš„é«˜åº¦
          const leftColumn = document.getElementById("left-column");
          const rightColumn = document.getElementById("right-column");
          let leftHeight = getColumnHeight(leftColumn);
          let rightHeight = getColumnHeight(rightColumn);

          // æŒ‰ç…§ç€‘å¸ƒæµæ–¹å¼æ·»åŠ æ–°å†…å®¹
          newItems.forEach((item, index) => {
            const feedItem = createFeedItem(item);
            const tempDiv = document.createElement("div");
            tempDiv.innerHTML = feedItem;
            const itemEl = tempDiv.firstElementChild;

            // ä¸ä¸ºæ–°åŠ è½½çš„å†…å®¹æ·»åŠ åŠ¨ç”»å»¶è¿Ÿ
            itemEl.style.animationDelay = "0s";

            // ä¼°ç®—é¡¹ç›®é«˜åº¦
            const itemHeight =
              200 + item.title.length * 0.5 + (item.category ? 20 : 0);

            // æ·»åŠ åˆ°é«˜åº¦è¾ƒå°çš„åˆ—
            if (leftHeight <= rightHeight) {
              leftColumn.appendChild(itemEl);
              leftHeight += itemHeight;
            } else {
              rightColumn.appendChild(itemEl);
              rightHeight += itemHeight;
            }
          });

          // éšè—åŠ è½½æŒ‡ç¤ºå™¨
          loadingIndicator.classList.add("hidden");
        }, 1500);
      }

      // è·å–åˆ—é«˜åº¦çš„è¾…åŠ©å‡½æ•°
      function getColumnHeight(column) {
        if (!column.children.length) return 0;
        const elements = Array.from(column.children);
        const totalHeight = elements.reduce(
          (sum, el) => sum + el.offsetHeight,
          0
        );
        return totalHeight;
      }

      // åˆå§‹åŒ–é¡µé¢
      document.addEventListener("DOMContentLoaded", function () {
        renderItems();

        // æ¨¡æ‹Ÿä¸‹æ‹‰åˆ·æ–°åŠŸèƒ½
        let startY = 0;
        let refreshing = false;

        document.addEventListener("touchstart", function (e) {
          startY = e.touches[0].clientY;
        });

        document.addEventListener("touchmove", function (e) {
          const y = e.touches[0].clientY;
          const scrollTop = document.documentElement.scrollTop;

          // åœ¨é¡µé¢é¡¶éƒ¨ä¸”å‘ä¸‹æ‹‰åŠ¨æ—¶
          if (scrollTop === 0 && y > startY && !refreshing) {
            const refreshIndicator =
              document.getElementById("refresh-indicator");
            refreshIndicator.classList.remove("hidden");
          }
        });

        document.addEventListener("touchend", function (e) {
          const scrollTop = document.documentElement.scrollTop;

          // åœ¨é¡µé¢é¡¶éƒ¨è§¦å‘åˆ·æ–°
          if (scrollTop === 0 && !refreshing) {
            const refreshIndicator =
              document.getElementById("refresh-indicator");
            refreshIndicator.classList.remove("hidden");

            refreshing = true;

            // æ¨¡æ‹Ÿåˆ·æ–°å»¶è¿Ÿ
            setTimeout(function () {
              refreshIndicator.classList.add("hidden");
              refreshing = false;

              // é‡æ–°æ¸²æŸ“å†…å®¹
              renderItems();
            }, 1500);
          }
        });

        // æ— é™æ»šåŠ¨åŠ è½½
        window.addEventListener("scroll", function () {
          if (
            window.innerHeight + window.scrollY >=
            document.body.offsetHeight - 300
          ) {
            // å½“è·ç¦»åº•éƒ¨300pxæ—¶åŠ è½½æ›´å¤šå†…å®¹
            loadMoreItems();
          }
        });
      });
    </script>
  </body>
</html>
